<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
    <meta name="author" content="Coderthemes">

    <link rel="shortcut icon" href="/static/assets/images/favicon_1.ico">

    <title></title>

    <!-- Dropzone css -->
    <link href="/static/assets/js/plugins/dropzone/dist/dropzone.css" rel="stylesheet" type="text/css">
    <!-- Plugins css -->
    <link href="/static/assets/js/plugins/notifications/notification.css" rel="stylesheet">

    <!-- Plugins css-->
    <link href="/static/assets/js/plugins/tagsinput/jquery.tagsinput.css" rel="stylesheet">
    <link href="/static/assets/js/plugins/toggles/toggles.css" rel="stylesheet">
    <link href="/static/assets/js/plugins/timepicker/bootstrap-timepicker.min.css" rel="stylesheet">
    <link href="/static/assets/js/plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link href="/static/assets/js/plugins/colorpicker/colorpicker.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/js/plugins/jquery-multi-select/multi-select.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/js/plugins/select2/dist/css/select2.css" rel="stylesheet" type="text/css">


    <link href="/static/assets/js/plugins/select2/dist/css/select2-bootstrap.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/js/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css"
          rel="stylesheet" />

    <!-- DataTables -->
    <link href="/static/assets/js/plugins/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/assets/js/plugins/datatables/buttons.bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/assets/js/plugins/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/assets/js/plugins/datatables/responsive.bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/assets/js/plugins/datatables/scroller.bootstrap.min.css" rel="stylesheet" type="text/css" />


    <link href="/static/assets/js/plugins/sweetalert/dist/sweetalert.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/css/core.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/css/icons.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/css/components.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/css/pages.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/css/menu.css" rel="stylesheet" type="text/css">
    <link href="/static/assets/css/responsive.css" rel="stylesheet" type="text/css">

    <script src="/static/assets/js/modernizr.min.js"></script>

    <link href="/signmanage/assets/css/select2.css" rel="stylesheet" type="text/css">
    <link href="/signmanage/assets/css/select2_metro.css" rel="stylesheet" type="text/css" />

    <style>
        .select2 {
            width: 100%;
            border-radius: 0px;
        }

        .selected {
            background-color: #fde97a !important;
        }

        tr.selected:hover {
            background-color: #fde97a;
        }
        #Detail_table thead .sorting:after ,
        #Detail_table thead .sorting_desc:after ,
        #Detail_table thead .sorting_asc:after {
            content: "" !important;
        }

        .maskClass{
            width:100%;
            height:100%;
            position : absolute;left : 0; top : 0;
            background: rgba(144,144,144,0.5);
            z-index:9999
        }
    </style>

</head>


<body class="fixed-left widescreen">
<!-- Begin page -->
<div id="wrapper">
    <!-- Top Bar Start -->
    <div class="topbar">
        <!-- LOGO -->
        <div class="topbar-left">
            <div class="text-center">
                <a href="/signmanage/" class="logo"><span>标识管理系统 </span></a>
            </div>
        </div>
        <!-- Button mobile view to collapse sidebar menu -->
        <div class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="">
                    <form class="navbar-form pull-left" role="search">
                        <button type="submit" class="btn btn-search"><i class="fa fa-search"></i></button>
                    </form>
                    <ul class="nav navbar-nav navbar-right pull-right">
                        <li class="hidden-xs">
                            <a href="#" id="btn-fullscreen" class="waves-effect"><i class="md md-crop-free"></i></a>
                        </li>
                        <li class="hidden-xs">
                            <a href="${pageContext.request.contextPath}/login/loginOut.action"><i class="md md-settings-power"></i></a>
                        </li>

                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </div>
    </div>
    <!-- Top Bar End -->
    <!-- ========== Left Sidebar Start ========== -->
    <div class="left side-menu">
        <div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 521px;"><div class="sidebar-inner slimscrollleft" style="overflow: hidden; width: auto; height: 521px;">
            <div class="user-details">
                <!--
                <div class="pull-left">
                    <img src="assets/images/users/avatar-1.jpg" alt="" class="thumb-md img-circle">
                </div>
                 -->
                <div class="user-info">
                    <div class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">${RName}<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="javascript:void(0)"><i class="md md-settings-power"></i> 注销</a></li>
                        </ul>
                    </div>
                    <p class="text-muted m-0">${USERNAME}</p>
                </div>
            </div>
            <!--- Divider -->
            <div id="sidebar-menu">
                <ul>
                    <li class="has_sub">
                        <a href="#" class="waves-effect waves-light active"><i class="md md-palette"></i> <span> 标识管理</span> <span class="pull-right"><i class="md md-add"></i></span></a>
                        <ul class="list-unstyled" style="display: block;">
                            <li><a href="/signmanage/sign/FKks/index">设备标识维护</a></li>
                            <li><a href="/signmanage/sign/FRoom/index">门牌标识维护</a></li>
                            <li><a href="/signmanage/sign/FConduit/index">管道标识维护</a></li>
                            <li><a href="/signmanage/sign/FIsolation/index">隔离标识维护</a></li>
                            <li><a href="/signflow/index">标识悬挂流程发起</a></li>
                        </ul>
                    </li>
                    <li class="has_sub">
                        <a href="#" class="waves-effect waves-light"><i class="md md-redeem"></i> <span> 数据统计 </span> <span class="pull-right"><i class="md md-add"></i></span></a>
                        <ul class="list-unstyled">
                            <li><a href="/signmanage/Sign/SignSearch">标识查询</a></li>
                        </ul>
                    </li>
                    <li class="has_sub">
                        <a href="#" class="waves-effect waves-light"><i class="md md-mail"></i><span> 基础数据 </span><span class="pull-right"><i class="md md-add"></i></span></a>
                        <ul class="list-unstyled">
                            <li><a href="/sys/room/index">标准化巡检分区</a></li>
                            <li><a href="/sys/pipeline/index">管道数据</a></li>
                            <li><a href="/sys/isolationCard/index">运行隔离牌数据</a></li>
                            <li><a href="/sys/cba/index">KKS设备数据维护</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="http://it.jnpc.com.cn:9999/webdoc/real/Pub8a9790a478004655017800cd31530029.html?STATE=0&OPERATE=3" target="_blank" class="waves-effect waves-light"><i class="md md-home"></i><span> 操作手册 </span></a>
                    </li>

                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="clearfix"></div>
        </div><div class="slimScrollBar" style="background: rgb(122, 134, 143); width: 5px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 372.859px; visibility: visible;"></div><div class="slimScrollRail" style="width: 5px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div></div>
    </div>
    <!-- Left Sidebar End -->
    <!-- Start right Content here -->
    <div class="content-page">
        <!-- Start content -->
        <div class="content">

            <div class="container">
                <!-- Page-Title -->
                <div class="row">
                    <div class="col-sm-12">
                        <h4 class="pull-left page-title">标识制作流程-发起</h4>
                        <ol class="breadcrumb pull-right">
                            <li><a href="#">标识制作流程</a></li>
                            <li class="active">流程发起</li>
                        </ol>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="panel-body">
                            <table style="width:100%" id="Detail_table" class="Detail-table table table-bordered">
                                <thead>
                                <tr>
                                    <th style="width:5%">序号</th>
                                    <th style="width:5%">单号</th>
                                    <th style="width:5%">标识内容（设备KKS码、中文名称等）</th>
                                    <th style="width:5%">位置</th>
                                    <th style="width:15%">材质</th>
                                    <th style="width:5%">标识类型</th>
                                    <th style="width:5%">缺陷类型</th>
                                    <th style="width:5%">状态</th>
                                    <th style="width:5%">处理人</th>
                                    <th style="width:5%">处理时间</th>
                                    <th style="width:5%">未处理原因</th>
                                    <th style="width:5%">责任值</th>
                                    <th style="width:15%">备注</th>
                                    <th style="width:20%">操作</th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div> <!-- panel-body -->
                    </div> <!-- panel -->
                </div>

            </div> <!-- container -->



        </div>
    </div>
</div>
<form id="myFormOwen" class="" role="form">
    <!-- 申请提交按钮 -->
    <button id="distributePersonBtn" type="button" style="display: none;" data-toggle="modal"
            data-target="#distributeArea">隐藏</button>
    <div id="distributeArea" class="modal fade" tabindex="-1" role="dialog"
         aria-labelledby="custom-width-modalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog" style="width:30%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button id="closeButton" type="button" class="close" data-dismiss="modal"
                            aria-hidden="true"></button>
                    <h4 class="modal-title" id="custom-width-modalLabel">分发处理人</h4>
                </div>
                <div class="modal-body">
                    <div class="form">
                        <div id="distributeForm" class="form-horizontal" role="form">
                            <div id="personRadio" class="form-group" style="padding-left:30px;padding-right:30px;">
                                <label for="personSelect" class="">处理人：</label>
                                <select class="select2 form-control" id="personSelect" name="personSelect"
                                        data-placeholder="请选择">
                                </select>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button id="comfirnOk" type="button" class="btn btn-primary waves-effect waves-light"
                            onclick="f_distribute()">确定</button>
                    <button id="closeAddPanle" type="button" class="btn btn-default waves-effect"
                            onclick="f_closeDistribute()">关闭</button>
                </div>
            </div>
        </div>
    </div>
    <!-- 申请提交按钮 -->
    <input type="hidden" id="startUserId" name="startUserId" value="${baseInput.startUserId}" />
    <input type="hidden" id="type" name="type" value="${baseInput.type}" />
    <input type="hidden" id="startDept" name="startDept" value="${baseInput.startDept}" />
    <input type="hidden" id="systemId" name="systemId" value="${baseInput.systemId}" />
    <input type="hidden" id="gateWay01" name="gateWay01" value="${baseInput.gateWay01}" />
    <input type="hidden" id="gateWay02" name="gateWay02" value="${baseInput.gateWay02}" />
    <input type="hidden" id="gateWay03" name="gateWay03" value="${baseInput.gateWay03}" />
    <input type="hidden" id="temp10" name="temp10" value="${baseInput.temp10}" />
    <input type="hidden" id="startPrincipalId" name="startPrincipalId" value="${baseInput.startPrincipalId}" />
    <input type="hidden" id="processId" name="processId" value="${baseInput.processId}" />
    <input type="hidden" id="status" name="status" value="${baseInput.status}" />
    <input type="hidden" id="nodeId" name="nodeId" value="${baseInput.nodeId}" />
    <input type="hidden" id="taskId" name="taskId" value="${baseInput.taskId}" />
    <input type="hidden" id="taskName" name="taskName" value="${baseInput.taskName}" />
    <input type="hidden" id="reqNo" name="reqNo" value="${baseInput.reqNo}" />
    <input type="hidden" id="opinion" name="opinion" value="${baseInput.opinion}" />
    <input type="hidden" id="temp01" name="temp01" value="${baseInput.temp01}" />
    <input type="hidden" id="temp02" name="temp02" value="${baseInput.temp02}" />
    <input type="hidden" id="temp03" name="temp03" value="${baseInput.temp03}" />
    <input type="hidden" id="temp04" name="temp04" value="${baseInput.temp04}" />
    <input type="hidden" id="apprUserId" name="apprUserId" value="${baseInput.apprUserId}" />
    <input type="hidden" id="apprUserName" name="apprUserName" value="${baseInput.apprUserName}" />
    <input type="hidden" id="sapTaskId" name="sapTaskId" value="${baseInput.sapTaskId}" />
    <input type="hidden" id="gids" name="gids" value="${baseInput.temp05}" />
    <input type="hidden" id="attachEditable" name="attachEditable" value="${attachEditable}" />
    <input type="hidden" id="nextPerson" name="nextPerson" />
    <input type="hidden" id="nextPersonName" name="nextPersonName" />
</form>

<div id="con-modal-attachs" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true" style="display: none">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">附件管理/查看</h4>
            </div>

            <%@include file="attachments_manage_appr.jsp"%>

            <div class="modal-footer">
                <button type="button" class="btn btn-default waves-effect" data-dismiss="modal">返回</button>
            </div>
        </div>
    </div>
</div><!-- /.modal -->

</body>

<script>
    var resizefunc = [];
</script>
<!-- jQuery  -->
<script src="/static/assets/js/jquery.min.js"></script>
<script src="/static/assets/js/bootstrap.min.js"></script>
<script src="/static/assets/js/detect.js"></script>
<script src="/static/assets/js/fastclick.js"></script>
<script src="/static/assets/js/jquery.slimscroll.js"></script>
<script src="/static/assets/js/jquery.blockUI.js"></script>
<script src="/static/assets/js/waves.js"></script>
<script src="/static/assets/js/wow.min.js"></script>
<script src="/static/assets/js/jquery.nicescroll.js"></script>
<script src="/static/assets/js/jquery.scrollTo.min.js"></script>

<!-- Datatables-->
<script src="/static/assets/js/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/static/assets/js/plugins/datatables/dataTables.bootstrap.js"></script>
<script src="/static/assets/js/plugins/datatables/dataTables.buttons.min.js"></script>
<script src="/static/assets/js/plugins/datatables/buttons.bootstrap.min.js"></script>
<script src="/static/assets/js/plugins/datatables/jszip.min.js"></script>
<script src="/static/assets/js/plugins/datatables/pdfmake.min.js"></script>
<script src="/static/assets/js/plugins/datatables/vfs_fonts.js"></script>
<script src="/static/assets/js/plugins/datatables/buttons.html5.min.js"></script>
<script src="/static/assets/js/plugins/datatables/buttons.print.min.js"></script>
<script src="/static/assets/js/plugins/datatables/dataTables.fixedHeader.min.js"></script>
<script src="/static/assets/js/plugins/datatables/dataTables.keyTable.min.js"></script>
<script src="/static/assets/js/plugins/datatables/dataTables.responsive.min.js"></script>
<script src="/static/assets/js/plugins/datatables/responsive.bootstrap.min.js"></script>
<script src="/static/assets/js/plugins/datatables/dataTables.scroller.min.js"></script>

<!-- Modal-Effect -->
<script src="/static/assets/js/plugins/modal-effect/js/classie.js"></script>
<script src="/static/assets/js/plugins/modal-effect/js/modalEffects.js"></script>

<!-- Datatable init js -->
<script src="/static/assets/pages/datatables.init.js"></script>
<script src="/static/assets/js/jquery.app.js"></script>

<!-- jquery init js -->
<script src="/signmanage/assets/js/jquery-form.js"></script>
<!-- Page Specific JS Libraries -->
<script src="/static/assets/js/plugins/dropzone/dist/dropzone.js"></script>
<script src="/signmanage/assets/js/select2.full.js" type="text/javascript"></script>
<script src="/static/assets/js/plugins/toggles/toggles.min.js"></script>


<script src="/assets/js/plugins/notifyjs/dist/notify.min.js"></script>
<script src="/assets/js/plugins/notifications/notify-metro.js"></script>
<script src="/assets/js/plugins/notifications/notifications.js"></script>

<script src="/signmanage/js/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
<script src="/signmanage/js/ajaxfileupload.js"></script>
<script src="/signmanage/js/flow/flowindex.js"></script>

<script>
    $.fn.modal.Constructor.prototype.enforceFocus = function () { };



    jQuery(document).ready(function () {
        // Form Toggles
        jQuery('.toggle').toggles({ on: true, text: { on: '是', off: '否' } });
    });
</script>


<script type="text/javascript">
    jQuery(document).ready(function ($) {
        t = $('#Detail_table').DataTable({
            // "ajax": "/signmanage/Sign/GetSignListBySeach?signtype=0&signstate=10&defecttype=0&flowno=0&liabilityz=0",
            "ajax": "/signflow/list?signstate=0",
            "scrollY": "600px",
            "scrollCollapse": "true",
            "paging": "false",
            "columnDefs": [{"defaultContent": "", "targets": "_all"}],
            "columns": [
                { "data": "sequence", "width": "5%" },  //序号
                { "data": "signid", "width": "5%" },  //单号
                { "data": "signangeContent", "width": "15%" },	//标识内容（设备KKS码、中文名称等）
                { "data": "position", "width": "15%" },	//位置
                {
                    "data": "material", "width": "5%",
                    render: function (data, type, row) {
                        if (type === 'display') {
                            var html = "";
                            switch (data) {
                                case 1:
                                    html = "双色板";
                                    break;
                                case 2:
                                    html = "不锈钢";
                                    break;
                                case 3:
                                    html = "金属";
                                    break;
                                default:
                                    html = "其它";
                                    break;
                            }
                            return html;
                        }
                    }
                },	//材质
                {
                    "data": "signtype", "width": "8%",
                    render: function (data, type, row) {
                        if (type === 'display') {
                            var html = "";
                            switch (data) {
                                case "A":
                                    html = "设备标识";
                                    break;
                                case "B":
                                    html = "门牌标识";
                                    break;
                                case "C":
                                    html = "管道标识";
                                    break;
                                case "D":
                                    html = "运行隔离牌";
                                    break;
                                default:
                                    html = "其他";
                                    break;
                            }
                            return html;
                        }
                    }
                },	//标识类型
                {
                    "data": "defecttype", "width": "8%",
                    render: function (data, type, row) {
                        if (type === 'display') {
                            var html = "";
                            switch (data) {
                                case 1:
                                    html = "01-标牌缺失";
                                    break;
                                case 2:
                                    html = "02-标牌损坏";
                                    break;
                                case 3:
                                    html = "03-支架损坏";
                                    break;
                                case 4:
                                    html = "04-旧标牌需要换新标牌";
                                    break;
                                case 5:
                                    html = "05-标牌信息错误";
                                    break;
                                default:
                                    html = "06-其他";
                                    break;
                            }
                            return html;
                        }
                    }
                },	//缺陷类型
                {
                    "data": "signstate", "width": "8%",
                    render: function (data, type, row) {
                        if (type === 'display') {
                            var html = "";
                            switch (data) {
                                case 10:
                                    html = "10-草稿";
                                    break;
                                case 20:
                                    html = "20-标牌制作中";
                                    break;
                                case 30:
                                    html = "30-制作完成,分发";
                                    break;
                                case 40:
                                    html = "40-二次分发";
                                    break;
                                case 50:
                                    html = "50-标牌悬挂";
                                    break;
                                case 60:
                                    html = "60-管理员复核";
                                    break;
                                case 0:
                                    html = "00-关闭";
                                    break;
                                default:
                                    html = "其他";
                                    break;
                            }
                            return html;
                        }
                    },
                    searchable: true
                },	//标识状态
                { "data": "processing", "width": "5%" },	//备注
                { "data": "processingtime", "width": "5%" },	//备注
                { "data": "nohandle", "width": "10%" },	//备注
                { "data": "liabilityZ", "width": "5%" },	//备注
                { "data": "remark", "width": "10%" },
                {
                    "data": "gid", "width": "10%",
                    render: function (data, type, row) {
                        var html = '';
                        html += "<button type='button' onclick='reloadFilesAppr(\""+row.gid+"\", \""+row.signtype+"\")' class='btn-primary btn-custom waves-effect waves-light btn-xs m-b-5' data-target='#con-modal-attachs'  data-toggle='modal'><i class='fa fa-edit'></i>&nbsp;附件</button>&nbsp;&nbsp;";
                        return html;

                    }
                }
            ],
            "language": {
                lengthMenu: "每页显示 _MENU_记录",
                zeroRecords: "没有匹配的数据",
                info: "第_PAGE_页/共 _PAGES_页  共_TOTAL_条记录",
                infoEmpty: "没有符合条件的记录",
                search: "查找",
                infoFiltered: "(从 _MAX_条记录中过滤)",
                paginate: { "first": "首页 ", "last": "末页", "next": "下一页", "previous": "上一页" }
            },
            dom: "Bfrtip",
            buttons: [

            ]

        });

        var html = "";

        html += '<button id="addToTable5" class="btn btn-primary waves-effect waves-light">流程发起 <i class="fa fa-plus"></i></button>';


        $(".dt-buttons").html(html);


        $("#addToTable5").on("click", {}, function () {
            var datas = t.rows('.selected').data();
            if (datas && 0 < datas.length) {
                f_submitSpecialRC(datas);
            } else {
                $.Notification.notify(
                    'error',
                    'top right',
                    '系统消息',
                    "请选择标识"
                );
                return;
            }
        })


        //设置分页位置靠右 .items>input:first
        $("#datatable_wrapper > div:first > div:first").attr("class", "col-sm-12");
        $("#datatable_wrapper > div:first > div:first").css("text-align", "right");
        $("#datatable_paginate").css("text-align", "right");
        $("#datatable_info").css("text-align", "left");


        $("#btn_add").click(function () {
            $("#RoomForm").clearForm();
        });

        $('#Detail_table tbody').on('click', 'tr', function () {
            $(this).toggleClass('selected');
        });


    });
</script>

</html>